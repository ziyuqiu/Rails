<p id="notice"><%= notice %></p>

<h1>Search</h1>

  

</br>
</br>

  <div class="input-group">
    <%= form_tag(search_path, method: :post, id: "search-form", remote: true) do %>
      <select id="sub-filter" name="filter">
        <option value="">----Please Select Subject----</option>
        <% @subjects.each do |sub| %>
          <option value= <%= sub.num %>> <%= sub.name %></option>
        <% end %>
      </select>
      <%= text_field_tag :phrase, params[:phrase], placeholder: "Search", id:"phrase" %>
      <!-- <%= submit_tag "Search"%> -->
    <% end %>
  </div>


</br>

  <div id= "display">
    <%= render "result"%>
  </div>
  
  </br>

<button type="button" class="btn btn-default"><%= link_to 'New Course', new_course_path %></button>

<script data-turbolinks-eval=false>
  $('#phrase').on('keyup', ajaxSubmitSearchForm);
  $('#sub-filter').on('change',ajaxSubmitSearchForm);
  $('#search-form').on('submit', function(e) {
    e.preventDefault();
    ajaxSubmitSearchForm();
  })    
  function ajaxSubmitSearchForm(){
    console.log($('#search-form').serialize())
    $.ajax({
      url: $('#search-form').attr('action'),
      type: 'POST',
      dataType: "json",
      data: $('#search-form').serialize(),
      success: function (data) {

        $('#display').html(data.content);
      },
      complete: function (data) {
        console.log(data)
      }
    });
  }
</script>